<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>dustinlacewell's init.el</title>
<!-- 2018-04-19 Thu 16:54 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Dustin Lacewell" />
<meta  name="description" content="A literate programming style exposition of my Emacs configuration"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="https://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">dustinlacewell's init.el</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Introduction</a></li>
<li><a href="#sec-2">Package Management</a>
<ul>
<li><a href="#sec-2-1">Bootstrap straight.el</a></li>
<li><a href="#sec-2-2">Use-package Integration</a></li>
<li><a href="#sec-2-3">Ensure Git Availability</a></li>
</ul>
</li>
<li><a href="#sec-3">Org-mode</a>
<ul>
<li><a href="#sec-3-1">straight.el Fixes</a>
<ul>
<li><a href="#sec-3-1-1">fix-org-git-version</a></li>
<li><a href="#sec-3-1-2">fix-org-release</a></li>
</ul>
</li>
<li><a href="#sec-3-2">Package Setup</a></li>
<li><a href="#sec-3-3">Applescript Support</a></li>
<li><a href="#sec-3-4">Disable Code Evaluation Prompts</a></li>
<li><a href="#sec-3-5">Tidy Mode</a></li>
<li><a href="#sec-3-6">Todo Keywords</a></li>
<li><a href="#sec-3-7">Amazon Book Insert</a></li>
<li><a href="#sec-3-8">Navigation</a>
<ul>
<li><a href="#sec-3-8-1">Nested Narrowing</a></li>
<li><a href="#sec-3-8-2">org-olp</a></li>
</ul>
</li>
<li><a href="#sec-3-9">Capture</a>
<ul>
<li><a href="#sec-3-9-1">Setup</a></li>
<li><a href="#sec-3-9-2">Templates</a></li>
</ul>
</li>
<li><a href="#sec-3-10">Avy Jump</a>
<ul>
<li><a href="#sec-3-10-1">avy-org</a></li>
</ul>
</li>
<li><a href="#sec-3-11">Ensure One-Line Between Headers</a></li>
<li><a href="#sec-3-12">Pretty Bullets</a></li>
<li><a href="#sec-3-13">Pretty tables</a></li>
<li><a href="#sec-3-14">Theme customizations</a></li>
</ul>
</li>
<li><a href="#sec-4">Global Behaviors</a>
<ul>
<li><a href="#sec-4-1">Autosaves</a>
<ul>
<li><a href="#sec-4-1-1">Store autosaves in a single place</a></li>
<li><a href="#sec-4-1-2">Save every 20 secs or 20 keystrokes</a></li>
<li><a href="#sec-4-1-3">Autosave every buffer that visits a file</a></li>
<li><a href="#sec-4-1-4">Store backups with the autosaves</a></li>
<li><a href="#sec-4-1-5">Keep 10 backups</a></li>
<li><a href="#sec-4-1-6">Delete old backups</a></li>
<li><a href="#sec-4-1-7">Copy files to avoid various problems</a></li>
<li><a href="#sec-4-1-8">Backup files even if version controlled</a></li>
<li><a href="#sec-4-1-9">Backup every save</a></li>
</ul>
</li>
<li><a href="#sec-4-2">Exec-path from Shell</a></li>
<li><a href="#sec-4-3">Badger-theme</a></li>
<li><a href="#sec-4-4">Disable Unused Features</a>
<ul>
<li><a href="#sec-4-4-1">Menubar</a></li>
<li><a href="#sec-4-4-2">Toolbar</a></li>
<li><a href="#sec-4-4-3">Scrollbar</a></li>
<li><a href="#sec-4-4-4">Startup Message</a></li>
<li><a href="#sec-4-4-5">Customizations File</a></li>
</ul>
</li>
<li><a href="#sec-4-5">Cursor Properties</a>
<ul>
<li><a href="#sec-4-5-1">Box style</a></li>
<li><a href="#sec-4-5-2">Blinking</a></li>
</ul>
</li>
<li><a href="#sec-4-6">Modeline Properties</a>
<ul>
<li><a href="#sec-4-6-1">Column Number</a></li>
<li><a href="#sec-4-6-2">Current Time</a></li>
<li><a href="#sec-4-6-3">Hidden Modes</a></li>
<li><a href="#sec-4-6-4">Shorten prompts</a></li>
</ul>
</li>
<li><a href="#sec-4-7">Editor Properties</a>
<ul>
<li><a href="#sec-4-7-1">Always Spaces</a></li>
<li><a href="#sec-4-7-2">Visual Fill-column</a></li>
<li><a href="#sec-4-7-3">Fill at 85</a></li>
<li><a href="#sec-4-7-4">Autofill org-mode and text-mode</a></li>
<li><a href="#sec-4-7-5">Always use SSH for Tramp</a></li>
</ul>
</li>
<li><a href="#sec-4-8">Minor Modes</a>
<ul>
<li><a href="#sec-4-8-1">whitespace-mode</a></li>
<li><a href="#sec-4-8-2">prettify-symbols-mode</a></li>
<li><a href="#sec-4-8-3">electric-pair-mode</a></li>
<li><a href="#sec-4-8-4">rainbow-delimeters-mode</a></li>
<li><a href="#sec-4-8-5">show-paren-mode</a></li>
<li><a href="#sec-4-8-6">which-key-mode</a></li>
<li><a href="#sec-4-8-7">company-mode</a></li>
<li><a href="#sec-4-8-8">ispell-minor-mode</a></li>
</ul>
</li>
<li><a href="#sec-4-9">Keybindings</a>
<ul>
<li><a href="#sec-4-9-1">M-n M-p</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-5">Utility Packages</a>
<ul>
<li><a href="#sec-5-1">Helm</a>
<ul>
<li><a href="#sec-5-1-1">Setup</a></li>
<li><a href="#sec-5-1-2">ace-jump-helm-line</a></li>
<li><a href="#sec-5-1-3">helm-ag</a></li>
<li><a href="#sec-5-1-4">helm-bookmark</a></li>
<li><a href="#sec-5-1-5">helm-company</a></li>
<li><a href="#sec-5-1-6">helm-descbinds</a></li>
<li><a href="#sec-5-1-7">helm-flyspell</a></li>
<li><a href="#sec-5-1-8">helm-org-rifle</a></li>
</ul>
</li>
<li><a href="#sec-5-2">Magit</a>
<ul>
<li><a href="#sec-5-2-1">Setup</a></li>
</ul>
</li>
<li><a href="#sec-5-3">Projectile</a>
<ul>
<li><a href="#sec-5-3-1">Setup</a></li>
<li><a href="#sec-5-3-2">helm-projectile</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-6">Major Modes</a>
<ul>
<li><a href="#sec-6-1">Applescript</a></li>
<li><a href="#sec-6-2">Lispy</a></li>
<li><a href="#sec-6-3">Paredit</a></li>
<li><a href="#sec-6-4">Elfeed</a></li>
<li><a href="#sec-6-5">Docker</a></li>
<li><a href="#sec-6-6">Nix</a>
<ul>
<li><a href="#sec-6-6-1">nix-mode</a></li>
<li><a href="#sec-6-6-2">nix-sandbox</a></li>
</ul>
</li>
<li><a href="#sec-6-7">Python</a>
<ul>
<li><a href="#sec-6-7-1">Jedi</a></li>
<li><a href="#sec-6-7-2">Elpy</a></li>
</ul>
</li>
<li><a href="#sec-6-8">F#</a>
<ul>
<li><a href="#sec-6-8-1">Setup</a></li>
</ul>
</li>
<li><a href="#sec-6-9">Markdown</a></li>
<li><a href="#sec-6-10">decide-mode</a></li>
</ul>
</li>
<li><a href="#sec-7">Hydra</a>
<ul>
<li><a href="#sec-7-1">Hera</a></li>
<li><a href="#sec-7-2">hydra-helm</a>
<ul>
<li><a href="#sec-7-2-1">helm-persistent-delete-marked</a></li>
<li><a href="#sec-7-2-2">helm-persistent-kill-buffers</a></li>
<li><a href="#sec-7-2-3">hydra-helm</a></li>
</ul>
</li>
<li><a href="#sec-7-3">hydra-org</a>
<ul>
<li><a href="#sec-7-3-1">hydra-org-goto-first-sibling</a></li>
<li><a href="#sec-7-3-2">hydra-org-goto-last-sibling</a></li>
<li><a href="#sec-7-3-3">hydra-org-parent-level</a></li>
<li><a href="#sec-7-3-4">hydra-org</a></li>
</ul>
</li>
<li><a href="#sec-7-4">hydra-python</a></li>
<li><a href="#sec-7-5">hydra-eval</a></li>
<li><a href="#sec-7-6">hydra-window</a></li>
<li><a href="#sec-7-7">hydra-yank-pop</a></li>
<li><a href="#sec-7-8">hydra-zoom</a></li>
<li><a href="#sec-7-9">hydra-mark</a></li>
<li><a href="#sec-7-10">hydra-registers</a></li>
<li><a href="#sec-7-11">hydra-bookmarks</a></li>
<li><a href="#sec-7-12">hydra-help</a></li>
<li><a href="#sec-7-13">hydra-toggle</a></li>
<li><a href="#sec-7-14">hydra-projectile</a></li>
</ul>
</li>
<li><a href="#sec-8">Life Support</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
This is a literate-style exposition of my Emacs configuration.
</p>

<p>
I use OSX and deploy Emacs and my configuration with <a href="https://github.com/dustinlacewell/dotfiles">Nix</a>.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Package Management</h2>
<div class="outline-text-2" id="text-2">
<p>
For Emacs packages, I use the Nix-like <a href="https://github.com/raxod502/straight.el">straight.el</a> instead of package.el.
</p>
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">Bootstrap straight.el</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(let ((bootstrap-file (concat user-emacs-directory "straight/repos/straight.el/bootstrap.el"))
      (bootstrap-version 3))
  (unless (file-exists-p bootstrap-file)
    (with-current-buffer
	(url-retrieve-synchronously
	 "https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"
	 'silent 'inhibit-cookies)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  (load bootstrap-file nil 'nomessage))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">Use-package Integration</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq straight-use-package-by-default t)
(straight-use-package 'use-package)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">Ensure Git Availability</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package git)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Org-mode</h2>
<div class="outline-text-2" id="text-3">
<p>
<a href="https://orgmode.org/">org-mode</a> is a <i>comprehensive</i> text-based data aggregation suite. It does hierarchical
documents, spreadsheets, hyperlinks, task capture and scheduling, code-block
evaluation and much more.
</p>

<p>
This is one of the most valuable pieces of software I've ever used and by far my most
used major mode.
</p>
</div>
<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">straight.el Fixes</h3>
<div class="outline-text-3" id="text-3-1">
<p>
straight.el can't build org (yet) and so some functions end up missing. These
replacements will do.
</p>
</div>
<div id="outline-container-sec-3-1-1" class="outline-4">
<h4 id="sec-3-1-1">fix-org-git-version</h4>
<div class="outline-text-4" id="text-3-1-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun fix-org-git-version ()
  "The Git version of org-mode.
  Inserted by installing org-mode or when a release is made."
  (require 'git)
  (let ((git-repo (expand-file-name
		   "straight/repos/org/" user-emacs-directory)))
    (string-trim
     (git-run "describe"
	      "--match=release\*"
	      "--abbrev=6"
	      "HEAD"))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-1-2" class="outline-4">
<h4 id="sec-3-1-2">fix-org-release</h4>
<div class="outline-text-4" id="text-3-1-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun fix-org-release ()
  "The release version of org-mode.
  Inserted by installing org-mode or when a release is made."
  (require 'git)
  (let ((git-repo (expand-file-name
		   "straight/repos/org/" user-emacs-directory)))
    (string-trim
     (string-remove-prefix
      "release_"
      (git-run "describe"
	       "--match=release\*"
	       "--abbrev=0"
	       "HEAD")))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">Package Setup</h3>
<div class="outline-text-3" id="text-3-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package org
  :mode ("\\.org\\'" . org-mode)
  :bind (:map org-mode-map
	      ("M-n" . outline-next-visible-heading)
	      ("M-p" . outline-previous-visible-heading)
	      ("M-RET" . org-insert-heading))
  :config
  ;; This forces straight to load the package immediately in an attempt to avoid the
  ;; Org that ships with Emacs.
  (require 'org)
  (defalias #'org-git-version #'fix-org-git-version)
  (defalias #'org-release #'fix-org-release)

  ;; Enable templates like &lt;s
  (require 'org-tempo)

  (org-babel-do-load-languages
   'org-babel-load-languages
   '((shell . t)
     (applescript . t)
     (emacs-lisp . t)))

  (setq org-babel-default-header-args
	'((:session . "none")
	  (:results . "silent")
	  (:exports . "code")
	  (:cache . "no")
	  (:noweb . "no")
	  (:hlines . "no")
	  (:tangle . "no")))

  ;; If you try to insert a heading in the middle of an entry, don't split it in
  ;; half, but instead insert the new heading after the end of the current entry.
  (setq org-insert-heading-respect-content nil)

  ;; Indent subsections.
  (add-hook 'org-mode-hook #'org-indent-mode)

  ;; Auto-fill paragraphs
  (add-hook 'org-mode-hook 'turn-on-auto-fill))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3">Applescript Support</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package ob-applescript
  :after (org)
  :straight (ob-applescript :type git :host github :repo "dustinlacewell/ob-applescript.el")
  :config (require 'ob-applescript))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4">Disable Code Evaluation Prompts</h3>
<div class="outline-text-3" id="text-3-4">
<div class="org-src-container">

<pre class="src src-elisp">(setq org-confirm-babel-evaluate nil)
(setq org-confirm-shell-link-function nil)
(setq org-confirm-elisp-link-function nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5">Tidy Mode</h3>
<div class="outline-text-3" id="text-3-5">
<p>
Tidying will fold all headings globally, except the heading at the point. It will show the
heading's entry and folded children.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-tidy--tidy (&amp;rest args)
  (save-excursion
    (org-global-cycle 1)
    (org-cycle)
    (let ((last org-cycle-subtree-status))
      (while (not (eq 'folded org-cycle-subtree-status))
	(org-cycle)
	(if (eq last org-cycle-subtree-status)
	    (setq org-cycle-subtree-status 'folded)
	  (setq last org-cycle-subtree-status))))
    (recenter)))

(defun org-tidy-tidy-up ()
  (interactive)
  (org-tidy--tidy))

(defun org-tidy-on ()
  (interactive)
  (advice-add 'org-backward-heading-same-level :after #'org-tidy--tidy)
  (advice-add 'org-forward-heading-same-level :after #'org-tidy--tidy))

(defun org-tidy-off ()
  (interactive)
  (advice-remove 'org-backward-heading-same-level #'org-tidy--tidy)
  (advice-remove 'org-forward-heading-same-level #'org-tidy--tidy))

(defun org-tidy-p ()
  (if (and (advice-member-p 'org-tidy--tidy #'org-backward-heading-same-level)
	   (advice-member-p 'org-tidy--tidy #'org-forward-heading-same-level))
      t nil))

(defun org-tidy ()
  (interactive)
  (if (org-tidy-p)
      (call-interactively 'org-tidy-off)
    (call-interactively 'org-tidy-on))
  (org-tidy-p))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6">Todo Keywords</h3>
<div class="outline-text-3" id="text-3-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp"></pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7">Amazon Book Insert</h3>
<div class="outline-text-3" id="text-3-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package esxml
  :config (require 'esxml-query))

(use-package org-web-tools)

(defun amazon-fetch-as-tree (url)
  (let ((html (org-web-tools--get-url url)))
    (with-temp-buffer
      (insert html)
      (libxml-parse-html-region (point-min) (point-max)))))

(defun amazon-find-item-in-list (target list p)
  (cl-loop for li in list
	   for (field value) = (funcall p li)
	   when (equal field target)
	   return (s-trim value)))

(defun amazon-find-swatch (tree)
  (let ((swatches (esxml-query-all "div#tmmSwatches li" tree)))
    (loop for i
	  from 0
	  for li in swatches
	  when (esxml--node-matches-modifier-p li 'class "selected")
	  return i)))

(defun amazon-default-details (tree)
  (esxml-query-all "table#productDetailsTable ul li" tree))

(defun amazon-default-detail (target tree)
  (let ((details (amazon-default-details tree)))
    (amazon-find-item-in-list
     target details (lambda (li) (message (format "LI: %s" li))
		      (ignore-errors
			(-let (((_ _ (_ _ field) value) li))
			  (list field value)))))))

(defun amazon-default-author (tree)
  (or (esxml-query "span.author .contributorNameID &gt; *" tree)
      (esxml-query "span.author .a-link-normal &gt; *" tree)))

(defun amazon-title-date (tree)
  (let* ((ele (esxml-query-all "div#booksTitle h1#title &gt; span *" tree))
	(date (third ele)))
    (s-replace "– " "" date)))

(defun amazon-default-date (tree)
  (let ((raw (amazon-default-detail "Publication Date:" tree)))
    (s-replace "– " "" raw)))

(defun amazon-audiobook-date (tree)
  (amazon-default-detail "Audible.com Release Date:" tree))

(defun amazon-default-publisher (tree)
  (replace-regexp-in-string (rx " (" (1+ anything) ")") ""
			    (amazon-default-detail "Publisher:" tree)))

(defun amazon-default-asin (tree) (amazon-default-detail "ASIN:" tree))

(defun amazon-default-isbn-10 (tree) (amazon-default-detail "ISBN-10:" tree))

(defun amazon-default-isbn-13 (tree) (amazon-default-detail "ISBN-13:" tree))

(defun amazon-default-strategy ()
  (list :author 'amazon-default-author
	:title 'amazon-default-title
	:date 'amazon-default-date
	:asin 'amazon-default-asin
	:publisher 'amazon-default-publisher
	:isbn-10 'amazon-default-isbn-10
	:isbn-13 'amazon-default-isbn-13))

(defun amazon-merge-plist (first second)
  (loop for (key value) on second by 'cddr
	do (setq first (plist-put first key value)))
  first)

(defun amazon-kindle-strategy ()
  (amazon-merge-plist
   (amazon-default-strategy) (list :format '(lambda (tree) "kindle"))))

(defun amazon-hardcover-strategy ()
  (amazon-merge-plist
   (amazon-default-strategy) (list :format '(lambda (tree) "hardcover"))))

(defun amazon-paperback-strategy ()
  (amazon-merge-plist
   (amazon-default-strategy) (list :format '(lambda (tree) "paperback"))))

(defun amazon-audiobook-strategy ()
  (amazon-merge-plist
   (org-plist-delete (amazon-default-strategy) :isbn-10)
   (list :format '(lambda (tree) "audiobook")
	 :date 'amazon-audiobook-date)))

(defun amazon-is-kindle (tree)
  (ignore-errors
    (string= (esxml-query ".selected .a-button-text span *" tree) "Kindle")))

(defun amazon-is-hardcover (tree)
  (ignore-errors
    (string= (esxml-query ".selected .a-button-text span *" tree) "Hardcover")))

(defun amazon-is-paperback (tree)
  (ignore-errors
    (string= (esxml-query ".selected .a-button-text span *" tree) "Paperback")))

(defun amazon-is-audiobook (tree)
  (ignore-errors
    (esxml-query ".selected .audibleTitle" tree) (amazon-audiobook-strategy)))

(defun amazon-pick-strategy (tree)
  (cond
      ((amazon-is-kindle tree) (amazon-kindle-strategy))
      ((amazon-is-hardcover tree) (amazon-hardcover-strategy))
      ((amazon-is-paperback tree) (amazon-paperback-strategy))
      ((amazon-is-audiobook tree) (amazon-audiobook-strategy))))

(defun amazon-execute-strategy (strategy tree)
  (loop for (key value) on strategy by 'cddr
	append (list key (funcall value tree))))

(defun amazon-book-data (url)
  "Return plist of data for book at Amazon URL."
  (let* ((tree (amazon-fetch-as-tree url))
	 (strategy (amazon-pick-strategy tree)))
    (amazon-execute-strategy strategy tree)))

(defun amazon-key-name (key)
  (--&gt; key
       (symbol-name it)
       (replace-regexp-in-string "^:" "" it)
       (upcase it)))

(defun amazon-create-property-drawer (data)
  (list 'property-drawer nil
	(cl-loop for (key value) on data by 'cddr
		 for key = (amazon-key-name key)
		 for pair = (list :key key :value value)
		 when value
		 collect (list 'node-property pair))))

(defun amazon-insert-book (&amp;optional url)
  "Insert Org entry for book at URL."
  (interactive)
  (when-let ((url (or url (org-web-tools--get-first-url)))
	     (data (amazon-book-data url))
	     (property-drawer (amazon-create-property-drawer data))
	     (author (plist-get data :author))
	     (title (plist-get data :title))
	     (link (org-make-link-string url title))
	     (heading (format "%s, %s" author link))
	     (element (org-element-create 'headline (list :level 1 :title heading)
					  property-drawer))
	     (string (org-element-interpret-data element)))
    (kill-new string)
    (save-excursion
      (beginning-of-line)
      (org-paste-subtree))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-8" class="outline-3">
<h3 id="sec-3-8">Navigation</h3>
<div class="outline-text-3" id="text-3-8">
</div><div id="outline-container-sec-3-8-1" class="outline-4">
<h4 id="sec-3-8-1">Nested Narrowing</h4>
<div class="outline-text-4" id="text-3-8-1">
</div><ul class="org-ul"><li><a id="sec-3-8-1-1" name="sec-3-8-1-1"></a>Hooks<br  /><div class="outline-text-5" id="text-3-8-1-1">
<p>
These hooks are called before and after narrowing and widening operations.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defvar nn-before-narrow-hook (list) "Called before any nn narrowing operation")
(defvar nn-after-narrow-hook (list) "Called after any nn narrowing operation")
(defvar nn-before-widen-hook (list) "Called before any nn widening operation")
(defvar nn-after-widen-hook (list) "Called after any nn widening operation")
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-1-2" name="sec-3-8-1-2"></a>nn-narrow-stack<br  /><div class="outline-text-5" id="text-3-8-1-2">
<p>
This list variable represents a stack of previous narrowing operations.
</p>

<p>
Elements are lists of the form <code>(list start end)</code>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defvar nn-narrow-stack (list) "Represents a stack of previous narrowing operations.")
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-1-3" name="sec-3-8-1-3"></a>nn-narrow<br  /><div class="outline-text-5" id="text-3-8-1-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun nn-narrow ()
  (interactive)
  (if (&gt; 0 (length nn-before-narrow-hook))
      (mapcar (lambda (f) (f)) 'nn-before-narrow-hook))

  (let ((elem (list (point-min) (point-max))))
    (setq nn-narrow-stack (push elem nn-narrow-stack)))
  (org-narrow-to-subtree)
  (outline-hide-subtree)
  (org-cycle)

  (if (&gt; 0 (length nn-after-narrow-hook))
      (mapcar (lambda (f) (f)) 'knowt-after-narrow-hook)))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-1-4" name="sec-3-8-1-4"></a>nn-widen<br  /><div class="outline-text-5" id="text-3-8-1-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun nn-widen ()
  (interactive)
  (if nn-narrow-stack
      (progn
	(if (&gt; 0 (length nn-narrow-stack))
	    (if (&gt; 0 (length nn-before-widen-hook))
		(mapcar (lambda (f) (f)) 'nn-before-widen-hook))

	    (let ((prev-region (pop nn-narrow-stack)))
	      (widen)
	      (destructuring-bind (start end) prev-region
		(narrow-to-region start end)
		(goto-char start)))

	    (recenter)

	    (if (&gt; 0 (length nn-after-widen-hook))
		(mapcar (lambda (f) (f)) 'knowt-after-widen-hook))))))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-1-5" name="sec-3-8-1-5"></a>nn-narrow-regexp<br  /><div class="outline-text-5" id="text-3-8-1-5">
<p>
Performs a regexp search before narrowing.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun nn-narrow-regexp (term)
  (beginning-of-buffer)
  (search-forward-regexp (format "^[\\*].*%s" term))
  (nn-narrow))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-1-6" name="sec-3-8-1-6"></a>nn-narrow-occur<br  /><div class="outline-text-5" id="text-3-8-1-6">
<p>
Performs an occur search before narrowing.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun nn-narrow-occur ()
  (interactive)
  (helm-occur)
  (nn-narrow))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-1-7" name="sec-3-8-1-7"></a>nn-narrow-heading<br  /><div class="outline-text-5" id="text-3-8-1-7">
<p>
Performs a heading search before narrowing.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun nn-narrow-heading ()
  (interactive)
  (helm-org-in-buffer-headings)
  (outline-hide-subtree)
  (nn-narrow))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-1-8" name="sec-3-8-1-8"></a>Auto-Narrowings<br  /><div class="outline-text-5" id="text-3-8-1-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun nn-reset ()
  (interactive)
  (widen)
  (beginning-of-buffer)
  (org-global-cycle 1)
  (search-forward-regexp "^* "))

(defun nn-narrow-to (heading)
  (nn-reset)
  (nn-narrow-regexp heading)
  (org-global-cycle 3)
  (beginning-of-buffer))
</pre>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-3-8-2" class="outline-4">
<h4 id="sec-3-8-2">org-olp</h4>
<div class="outline-text-4" id="text-3-8-2">
<p>
This module provides two useful public functions:
</p>

<ul class="org-ul">
<li><code>org-olp-select</code> (file-name olp)
<code>olp</code> denotes a heading in <code>file-name</code> and a list of children are presented for
selection. Selection will navigate to the child header
</li>
<li><code>org-olp-make-olp</code> (file-name)
User is prompted for headers in <code>file-name</code>, starting at top-level, until a header
with no children is reached. An olp list is returned.
</li>
<li><code>org-olp-jump</code> (file-name)
Runs <code>org-olp-select</code> on a file, then visits the selected heading.
</li>
</ul>
</div>

<ul class="org-ul"><li><a id="sec-3-8-2-1" name="sec-3-8-2-1"></a>private<br  /><ul class="org-ul"><li><a id="sec-3-8-2-1-1" name="sec-3-8-2-1-1"></a>org-olp&#x2013;matches-in-buffer<br  /><div class="outline-text-6" id="text-3-8-2-1-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-olp--matches-in-buffer (regexp &amp;optional buffer)
  "return a list of matches of REGEXP in BUFFER or the current buffer if not given."
  (let ((matches))
    (save-match-data
      (save-excursion
	(with-current-buffer (or buffer (current-buffer))
	  (save-restriction
	    (widen)
	    (goto-char 1)
	    (while (search-forward-regexp regexp nil t 1)
	      (push (match-string 1) matches)))))
      matches)))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-2-1-2" name="sec-3-8-2-1-2"></a>org-olp&#x2013;subheadings-at-point<br  /><div class="outline-text-6" id="text-3-8-2-1-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-olp--subheadings-at-point (&amp;optional recursive)
  "Return a list of subheadings.  If RECURSIVE is truthy return a
list of all headings in subheading subtrees."
  (org-save-outline-visibility t
    (save-excursion
      (let ((pred (lambda () (org-entry-get nil "ITEM"))))
	(if recursive
	    (org-map-entries pred nil 'tree)
	  (progn
	    (org-back-to-heading t)
	    (org-show-subtree)
	    (if (org-goto-first-child)
		(cl-loop collect (funcall pred)
			 until (let ((pos (point)))
				 (null (org-forward-heading-same-level nil t))
				 (eq pos (point)))))))))))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-2-1-3" name="sec-3-8-2-1-3"></a>org-olp&#x2013;olp-subheadings<br  /><div class="outline-text-6" id="text-3-8-2-1-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-olp--olp-subheadings (olp)
  (goto-char (org-find-olp olp 't))
  (org-olp--subheadings-at-point))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-2-1-4" name="sec-3-8-2-1-4"></a>org-olp&#x2013;file-olp-subheadings<br  /><div class="outline-text-6" id="text-3-8-2-1-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-olp--file-olp-subheadings (file-name olp)
  (find-file (expand-file-name file-name))
  (org-olp--olp-subheadings olp))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-2-1-5" name="sec-3-8-2-1-5"></a>org-olp&#x2013;pick-olp<br  /><div class="outline-text-6" id="text-3-8-2-1-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-olp--pick-olp (file-name children olp)
  (with-temp-buffer
      (insert-file-contents file-name)
      (org-mode)
      (let* ((selection (completing-read "Select header:" children))
	     (olp (append olp (list selection)))
	     (children (org-olp--olp-subheadings olp)))
	(if children
	    (org-olp--pick-olp file-name children olp)
	  olp))))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-2-1-6" name="sec-3-8-2-1-6"></a>org-olp&#x2013;goto<br  /><div class="outline-text-6" id="text-3-8-2-1-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-olp--goto (file-name olp)
  (find-file (expand-file-name file-name))
  (org-set-startup-visibility)
  (org-cycle '(64))
  (goto-char (org-find-olp olp t))
  (org-cycle '(4))
  (call-interactively 'org-cycle)
  (call-interactively 'recenter-top-bottom))
</pre>
</div>
</div>
</li></ul>
</li>

<li><a id="sec-3-8-2-2" name="sec-3-8-2-2"></a>public<br  /><ul class="org-ul"><li><a id="sec-3-8-2-2-1" name="sec-3-8-2-2-1"></a>org-olp-select<br  /><div class="outline-text-6" id="text-3-8-2-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-olp-select (file olp)
  (let* ((file-name (expand-file-name file))
	 (candidates (org-olp--file-olp-subheadings file olp))
	 (prompt (s-join " " olp))
	 (selection (completing-read prompt candidates))
	 (olp (append olp (list selection))))
    (org-olp--goto file-name olp)))

;; (org-olp-select "~/life/dnd/tables.org" '("Treasure"))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-2-2-2" name="sec-3-8-2-2-2"></a>org-olp-make-olp<br  /><div class="outline-text-6" id="text-3-8-2-2-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-olp-make-olp (file-name &amp;rest olp)
  (let* ((file-name (expand-file-name file-name)))
    (with-temp-buffer
      (insert-file-contents file-name)
      (org-mode)
      (if olp
	  (let ((children (org-olp--olp-subheadings olp)))
	    (org-olp--pick-olp file-name children olp))
	(let* ((top-headers (org-olp--matches-in-buffer "^\\*[ ]+\\(.+\\)$"))
	       (first-header (completing-read "Select header:" top-headers))
	       (olp (list first-header))
	       (children (org-olp--olp-subheadings olp)))
	  (org-olp--pick-olp file-name children olp))))))

;; (org-olp-make-olp "~/life/dnd/tables.org")
;; (org-olp-make-olp "~/life/dnd/tables.org" "Treasure")
</pre>
</div>
</div>
</li>

<li><a id="sec-3-8-2-2-3" name="sec-3-8-2-2-3"></a>org-olp-jump<br  /><div class="outline-text-6" id="text-3-8-2-2-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-olp-jump (file-name &amp;rest olp)
  (let ((file-name (expand-file-name file-name))
	(olp (apply 'org-olp-make-olp file-name olp)))
    (org-olp--goto file-name olp)))
;; (org-olp-jump "~/life/dnd/tables.org")
;; (org-olp-jump "~/life/dnd/tables.org" "Treasure")
</pre>
</div>
</div>
</li></ul>
</li></ul>
</div>
</div>

<div id="outline-container-sec-3-9" class="outline-3">
<h3 id="sec-3-9">Capture</h3>
<div class="outline-text-3" id="text-3-9">
</div><div id="outline-container-sec-3-9-1" class="outline-4">
<h4 id="sec-3-9-1">Setup</h4>
<div class="outline-text-4" id="text-3-9-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'org-capture)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-9-2" class="outline-4">
<h4 id="sec-3-9-2">Templates</h4>
<div class="outline-text-4" id="text-3-9-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-default-notes-file (expand-file-name "~/life/life.org"))
(global-set-key (kbd "C-c c") 'org-capture)

(defun tidy-capture ()
  (end-of-buffer)
  (search-backward ":end:")
  (next-line)
  (beginning-of-line)
  (call-interactively 'set-mark-command)
  (end-of-buffer)
  (call-interactively 'fill-region)
  (setq mark-active nil)
  "")

  (add-to-list 'org-capture-before-finalize-hook 'tidy-capture)
  (add-to-list 'org-capture-after-finalize-hook 'org-capture-goto-last-stored)

  (setq org-capture-templates
	'(
	  ("w" "Work")
	  ("wj" "JIRA" entry
	   (file+olp "/Users/dustinlacewell/life/life.org" "Workiva" "Tasks")
	   (file "/Users/dustinlacewell/life/templates/jira-issue.org"))

	  ("wl" "Work Log" entry (file+olp+datetree "/Users/dustinlacewell/life/life.org" "Workiva" "Worklog") "* %&lt;%l:%M %p&gt; - %?")

	  ("e" "Emacs Package" entry
	   (file+olp "/Users/dustinlacewell/life/life.org" "Software" "Emacs" "Packages")
	   (file "/Users/dustinlacewell/life/templates/emacs-package.org"))

	  ("d" "D&amp;D")
	  ("do" "D&amp;D Objective" entry (file+olp "/Users/dustinlacewell/life/life.org" "D&amp;D" "Objectives") "* %?")
	  ("dc" "D&amp;D Character" entry (file+olp "/Users/dustinlacewell/life/life.org" "D&amp;D" "Characters") "* %?")
	  ("da" "D&amp;D Log" entry (file+olp+datetree "/Users/dustinlacewell/life/life.org" "D&amp;D" "Log") "* %&lt;%l:%M %p&gt; - %?")
	  ))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3-10" class="outline-3">
<h3 id="sec-3-10">Avy Jump</h3>
<div class="outline-text-3" id="text-3-10">
</div><div id="outline-container-sec-3-10-1" class="outline-4">
<h4 id="sec-3-10-1">avy-org</h4>
<div class="outline-text-4" id="text-3-10-1">
<p>
These helpers were provided by dieggsy from #emacs on freenode. Thanks dieggsy!
</p>
</div>
<ul class="org-ul"><li><a id="sec-3-10-1-1" name="sec-3-10-1-1"></a>goto-level<br  /><div class="outline-text-5" id="text-3-10-1-1">
<p>
Accepts a numeric level and offers an avy jump to all headings visible at that level.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun avy-org-goto-level (&amp;optional num)
  (interactive (list
		(read-number "Select heading level: " (org-current-level))))
  (avy--generic-jump
   (format "^%s " (regexp-quote (make-string num ?*)))
   nil
   'pre))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-10-1-2" name="sec-3-10-1-2"></a>same-level<br  /><div class="outline-text-5" id="text-3-10-1-2">
<p>
Offers an avy jump to all visible siblings of the heading containing the point.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun avy-org-same-level (&amp;optional all)
  (interactive "P")
  (let ((org-level (org-current-level)))
    (avy--generic-jump
     (concat "^"
	     (regexp-quote
	      (make-string org-level ?*))
	     " ")
     nil
     'pre
     (unless (or all (= org-level 1))
       (save-excursion
	 (outline-up-heading 1)
	 (point)))
     (unless (or all (= org-level 1))
       (save-excursion
	 (outline-up-heading 1)
	 (org-end-of-subtree))))))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-10-1-3" name="sec-3-10-1-3"></a>parent-level<br  /><div class="outline-text-5" id="text-3-10-1-3">
<p>
Offers an avy jump to all visible headings at the level of the parent of the heading containing
the point.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun avy-org-parent-level (&amp;optional all)
  (interactive "P")
  (let ((org-level (org-current-level)))
    (if (= org-level 1)
	(message "Already at top level.")
      (avy--generic-jump
       (concat "^"
	       (regexp-quote
		(make-string
		 (- org-level 1)
		 ?*))
	       " ")
       nil
       'pre
       (unless (or all (= org-level 2))
	 (save-excursion
	   (outline-up-heading 2)
	   (point)))
       (unless (or all (= org-level 2))
	 (save-excursion
	   (outline-up-heading 2)
	   (org-end-of-subtree)))))))
</pre>
</div>
</div>
</li>

<li><a id="sec-3-10-1-4" name="sec-3-10-1-4"></a>child-level<br  /><div class="outline-text-5" id="text-3-10-1-4">
<p>
Offers an avy jump to all visible children of the heading containing the point.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun avy-org-child-level (&amp;optional all)
  (interactive "P")
  (if (save-excursion (org-goto-first-child))
      (let ((org-level (org-current-level)))
	(avy--generic-jump
	 (concat "^"
		 (regexp-quote
		  (make-string (+ org-level 1) ?*))
		 " ")
	 nil
	 'pre
	 (unless all
	   (save-excursion
	     (ignore-errors
	       (outline-up-heading 0))
	     (point)))
	 (unless all
	   (save-excursion
	     (ignore-errors
	       (outline-up-heading 0))
	     (org-end-of-subtree)))))
    (message "Heading has no children.")))
</pre>
</div>
</div>
</li></ul>
</div>
</div>

<div id="outline-container-sec-3-11" class="outline-3">
<h3 id="sec-3-11">Ensure One-Line Between Headers</h3>
<div class="outline-text-3" id="text-3-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-mode--ensure-one-blank-line ()
  (save-excursion (goto-char (point-min))
		  (while (re-search-forward "#\\+[a-z_]+\\s-\\*" nil t)
		    (replace-match "#+end_src

*")
		    (org-previous-visible-heading)
		    (call-interactively 'org-cycle)
		    (call-interactively 'org-cycle))
		  (org-save-outline-visibility t
		    (org-mode))))

(add-hook 'org-mode-hook
	  (lambda ()
	    (add-hook 'before-save-hook 'org-mode--ensure-one-blank-line nil 'make-it-local)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-12" class="outline-3">
<h3 id="sec-3-12">Pretty Bullets</h3>
<div class="outline-text-3" id="text-3-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package org-bullets
  :config
  (add-hook 'org-mode-hook 'org-bullets-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-13" class="outline-3">
<h3 id="sec-3-13">Pretty tables</h3>
<div class="outline-text-3" id="text-3-13">
<div class="org-src-container">

<pre class="src src-emacs-lisp">;; (use-package org-pretty-table
;;   :init
;;   (add-hook 'org-mode-hook 'turn-on-org-pretty-table-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-14" class="outline-3">
<h3 id="sec-3-14">Theme customizations</h3>
<div class="outline-text-3" id="text-3-14">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package org-beautify-theme)
(let* ((background-color (face-background 'default nil 'default))
       (padding nil))
  (setq org-ellipsis " ▿")
  (setq org-hide-emphasis-markers t)
  (setq org-hide-block-startup nil)
  (setq org-fontify-whole-heading-line t)
  (setq org-agenda-block-separator "")
  (set-face-attribute 'default nil :height 140)
  (custom-theme-set-faces 'org-beautify
			  `(org-agenda-structure
			    ((t
			      (:inherit default
					:height 2.0
					:underline nil))))
			  `(org-level-3
			    ((t (:box ,padding))))
			  `(org-level-2
			    ((t
			      (:height 1.25 :box ,padding))))
			  `(org-level-1
			    ((t (:height 1.5 :box ,padding))))
			  `(org-list-dt
			    ((t
			      (:inherit default height 2.0))))
			  `(org-ellipsis
			    ((t (:inherit org-level-faces))))
			  `(org-meta-line
			    ((t
			      (:family "Roboto Mono Thin for Powerline"
				       :height 0.8
				       :foreground "#777777"
				       :background "#222222"))))
			  `(org-document-info-keyword
			    ((t
			      (:inherit default
					:family "Roboto Mono Thin for Powerline"
					:height 0.8
					:foreground "#AA7777"))))
			  `(org-document-title
			    ((t
			      (:inherit org-level-1
					:height 2.0
					:underline nil
					:box ,padding))))
			  `(org-checkbox
			    ((t
			      (:box (:color "#93a1a1"
					    :style "released-button")))))
			  `(org-headline-done
			    ((t (:strike-through t))))
			  `(org-block
			    ((t
			      (:background "#373737"
					   :box nil
					   :height 1.2
					   :family "Source Code Pro for Powerline"))))
			  `(org-block-end-line
			    ((t (:inherit org-meta-line))))
			  `(org-block-begin-line
			    ((t (:inherit org-meta-line))))
			  `(org-done
			    ((t (:strike-through t))))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Global Behaviors</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">Autosaves</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Auto-save will periodically save your file to backup file while you
edit. This is great if something goes catastrophically wrong to Emacs!
</p>
</div>
<div id="outline-container-sec-4-1-1" class="outline-4">
<h4 id="sec-4-1-1">Store autosaves in a single place</h4>
<div class="outline-text-4" id="text-4-1-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defvar emacs-autosave-directory
  (concat user-emacs-directory "autosaves/")
  "This variable dictates where to put auto saves. It is set to a
  directory called autosaves located wherever your .emacs.d/ is
  located.")

(unless (file-exists-p emacs-autosave-directory)
    (make-directory emacs-autosave-directory))

(setq auto-save-file-name-transforms `((".*"
,emacs-autosave-directory t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-1-2" class="outline-4">
<h4 id="sec-4-1-2">Save every 20 secs or 20 keystrokes</h4>
<div class="outline-text-4" id="text-4-1-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq auto-save-timeout 20
      auto-save-interval 20)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-1-3" class="outline-4">
<h4 id="sec-4-1-3">Autosave every buffer that visits a file</h4>
<div class="outline-text-4" id="text-4-1-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq auto-save-default t)
</pre>
</div>
<p>
k** Backups
Backups are created everytime a buffer is saved. This is really useful
for recovering work that takes place between version-control commits
or on unversioned files.
</p>
</div>
</div>

<div id="outline-container-sec-4-1-4" class="outline-4">
<h4 id="sec-4-1-4">Store backups with the autosaves</h4>
<div class="outline-text-4" id="text-4-1-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq backup-directory-alist
      `((".*" . ,emacs-autosave-directory)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-1-5" class="outline-4">
<h4 id="sec-4-1-5">Keep 10 backups</h4>
<div class="outline-text-4" id="text-4-1-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq kept-new-versions 10
      kept-old-verisons 0)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-1-6" class="outline-4">
<h4 id="sec-4-1-6">Delete old backups</h4>
<div class="outline-text-4" id="text-4-1-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq delete-old-versions t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-1-7" class="outline-4">
<h4 id="sec-4-1-7">Copy files to avoid various problems</h4>
<div class="outline-text-4" id="text-4-1-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq backup-by-copying t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-1-8" class="outline-4">
<h4 id="sec-4-1-8">Backup files even if version controlled</h4>
<div class="outline-text-4" id="text-4-1-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq vc-make-backup-files t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-1-9" class="outline-4">
<h4 id="sec-4-1-9">Backup every save</h4>
<div class="outline-text-4" id="text-4-1-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package backup-each-save
  :config (add-hook 'after-save-hook 'backup-each-save))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2">Exec-path from Shell</h3>
<div class="outline-text-3" id="text-4-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package exec-path-from-shell
  :config
  (when (memq window-system '(mac ns x))
    (exec-path-from-shell-initialize)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3">Badger-theme</h3>
<div class="outline-text-3" id="text-4-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package badger-theme
  :config (load-theme 'badger t))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4">Disable Unused Features</h3>
<div class="outline-text-3" id="text-4-4">
</div><div id="outline-container-sec-4-4-1" class="outline-4">
<h4 id="sec-4-4-1">Menubar</h4>
<div class="outline-text-4" id="text-4-4-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(menu-bar-mode -1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-4-2" class="outline-4">
<h4 id="sec-4-4-2">Toolbar</h4>
<div class="outline-text-4" id="text-4-4-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(tool-bar-mode -1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-4-3" class="outline-4">
<h4 id="sec-4-4-3">Scrollbar</h4>
<div class="outline-text-4" id="text-4-4-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(scroll-bar-mode -1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-4-4" class="outline-4">
<h4 id="sec-4-4-4">Startup Message</h4>
<div class="outline-text-4" id="text-4-4-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq inhibit-startup-message t
      initial-scratch-message nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-4-5" class="outline-4">
<h4 id="sec-4-4-5">Customizations File</h4>
<div class="outline-text-4" id="text-4-4-5">
<p>
Since all the configuration should live in this version-controlled file, discard any
customizations made inside Emacs.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq custom-file (make-temp-file ""))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5">Cursor Properties</h3>
<div class="outline-text-3" id="text-4-5">
</div><div id="outline-container-sec-4-5-1" class="outline-4">
<h4 id="sec-4-5-1">Box style</h4>
<div class="outline-text-4" id="text-4-5-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default cursor-type 'box)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-5-2" class="outline-4">
<h4 id="sec-4-5-2">Blinking</h4>
<div class="outline-text-4" id="text-4-5-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(blink-cursor-mode 1)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6">Modeline Properties</h3>
<div class="outline-text-3" id="text-4-6">
</div><div id="outline-container-sec-4-6-1" class="outline-4">
<h4 id="sec-4-6-1">Column Number</h4>
<div class="outline-text-4" id="text-4-6-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(column-number-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-6-2" class="outline-4">
<h4 id="sec-4-6-2">Current Time</h4>
<div class="outline-text-4" id="text-4-6-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package timeclock
  :config (progn (display-time-mode 1)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-6-3" class="outline-4">
<h4 id="sec-4-6-3">Hidden Modes</h4>
<div class="outline-text-4" id="text-4-6-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package smart-mode-line
  :config
  (progn (setq sml/shorten-modes t)
	 (setq sml/shorten-directory t)
	 (setq sml/name-width 20)
	 (setq sml/mode-width 'full)
	 (setq sml/hidden-modes nil)
	 (setq sml/theme nil)
	 (add-to-list 'sml/hidden-modes " Anzu")
	 (add-to-list 'sml/hidden-modes " AC")
	 (add-to-list 'sml/hidden-modes " FlyC")
	 (add-to-list 'sml/hidden-modes " yas")
	 (add-to-list 'sml/hidden-modes " pair")
	 (add-to-list 'sml/hidden-modes " FIC")
	 (add-to-list 'sml/hidden-modes " Abbrev")
	 (add-to-list 'sml/hidden-modes " ARev")
	 (add-to-list 'sml/hidden-modes " SliNav")
	 (add-to-list 'sml/hidden-modes " ElDoc")
	 (add-to-list 'sml/hidden-modes " company")
	 (add-to-list 'sml/hidden-modes " overseer")
	 (add-to-list 'sml/hidden-modes " Guide")
	 (sml/setup)
	 (use-package anzu
	   :config
	   (global-anzu-mode 1))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-6-4" class="outline-4">
<h4 id="sec-4-6-4">Shorten prompts</h4>
<div class="outline-text-4" id="text-4-6-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(fset 'yes-or-no-p 'y-or-n-p)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7">Editor Properties</h3>
<div class="outline-text-3" id="text-4-7">
</div><div id="outline-container-sec-4-7-1" class="outline-4">
<h4 id="sec-4-7-1">Always Spaces</h4>
<div class="outline-text-4" id="text-4-7-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default indent-tabs-mode nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-7-2" class="outline-4">
<h4 id="sec-4-7-2">Visual Fill-column</h4>
<div class="outline-text-4" id="text-4-7-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package visual-fill-column)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-7-3" class="outline-4">
<h4 id="sec-4-7-3">Fill at 85</h4>
<div class="outline-text-4" id="text-4-7-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default fill-column 85)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-7-4" class="outline-4">
<h4 id="sec-4-7-4">Autofill org-mode and text-mode</h4>
<div class="outline-text-4" id="text-4-7-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'text-mode-hook 'turn-on-auto-fill)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-7-5" class="outline-4">
<h4 id="sec-4-7-5">Always use SSH for Tramp</h4>
<div class="outline-text-4" id="text-4-7-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq tramp-default-method "ssh")
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-8" class="outline-3">
<h3 id="sec-4-8">Minor Modes</h3>
<div class="outline-text-3" id="text-4-8">
</div><div id="outline-container-sec-4-8-1" class="outline-4">
<h4 id="sec-4-8-1">whitespace-mode</h4>
<div class="outline-text-4" id="text-4-8-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package whitespace
  :diminish global-whitespace-mode
  :init
  (setq whitespace-style
	'(face tabs newline trailing tab-mark space-before-tab space-after-tab))
  (global-whitespace-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-8-2" class="outline-4">
<h4 id="sec-4-8-2">prettify-symbols-mode</h4>
<div class="outline-text-4" id="text-4-8-2">
<p>
Various symbols will be replaced with nice looking unicode glyphs.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-prettify-symbols-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-8-3" class="outline-4">
<h4 id="sec-4-8-3">electric-pair-mode</h4>
<div class="outline-text-4" id="text-4-8-3">
<p>
Matching closed brackets are inserted for any typed open bracket.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(electric-pair-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-8-4" class="outline-4">
<h4 id="sec-4-8-4">rainbow-delimeters-mode</h4>
<div class="outline-text-4" id="text-4-8-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'color)
(defun gen-col-list (length s v &amp;optional hval)
  (cl-flet ( (random-float () (/ (random 10000000000) 10000000000.0))
	  (mod-float (f) (- f (ffloor f))) )
    (unless hval
      (setq hval (random-float)))
    (let ((golden-ratio-conjugate (/ (- (sqrt 5) 1) 2))
	  (h hval)
	  (current length)
	  (ret-list '()))
      (while (&gt; current 0)
	(setq ret-list
	      (append ret-list
		      (list (apply 'color-rgb-to-hex (color-hsl-to-rgb h s v)))))
	(setq h (mod-float (+ h golden-ratio-conjugate)))
	(setq current (- current 1)))
      ret-list)))

(defun set-random-rainbow-colors (s l &amp;optional h)
  ;; Output into message buffer in case you get a scheme you REALLY like.
  ;; (message "set-random-rainbow-colors %s" (list s l h))
  (interactive)
  (rainbow-delimiters-mode t)

  ;; Show mismatched braces in bright red.
  (set-face-background 'rainbow-delimiters-unmatched-face "red")

  ;; Rainbow delimiters based on golden ratio
  (let ( (colors (gen-col-list 9 s l h))
	 (i 1) )
    (let ( (length (length colors)) )
      ;;(message (concat "i " (number-to-string i) " length " (number-to-string length)))
      (while (&lt;= i length)
	(let ( (rainbow-var-name (concat "rainbow-delimiters-depth-" (number-to-string i) "-face"))
	       (col (nth i colors)) )
	  ;; (message (concat rainbow-var-name " =&gt; " col))
	  (set-face-foreground (intern rainbow-var-name) col))
	(setq i (+ i 1))))))



(use-package rainbow-delimiters :commands rainbow-delimiters-mode :hook ...
  :init
  (setq rainbow-delimiters-max-face-count 16)
  (set-random-rainbow-colors 0.6 0.7 0.5)
  (add-hook 'prog-mode-hook 'rainbow-delimiters-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-8-5" class="outline-4">
<h4 id="sec-4-8-5">show-paren-mode</h4>
<div class="outline-text-4" id="text-4-8-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(show-paren-mode 1)
(setq show-paren-delay 0)
(require 'paren)
(set-face-background 'show-paren-match (face-background 'default))
(set-face-background 'show-paren-mismatch (face-background 'default))
(set-face-foreground 'show-paren-match "#ff0")
(set-face-foreground 'show-paren-mismatch "#f00")
(set-face-attribute 'show-paren-match nil :weight 'extra-bold)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-8-6" class="outline-4">
<h4 id="sec-4-8-6">which-key-mode</h4>
<div class="outline-text-4" id="text-4-8-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package which-key              ;;; Display available keybindings in popup
  :diminish which-key-mode
  :config
  ;; sort single chars alphabetically P p Q q
  (setq which-key-sort-order 'which-key-key-order-alpha)
  (setq which-key-idle-delay 0.8)
  (which-key-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-8-7" class="outline-4">
<h4 id="sec-4-8-7">company-mode</h4>
<div class="outline-text-4" id="text-4-8-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package company
  :config (add-hook 'after-init-hook 'global-company-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-8-8" class="outline-4">
<h4 id="sec-4-8-8">ispell-minor-mode</h4>
<div class="outline-text-4" id="text-4-8-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq ispell-program-name (expand-file-name "~/.nix-profile/bin/aspell"))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-9" class="outline-3">
<h3 id="sec-4-9">Keybindings</h3>
<div class="outline-text-3" id="text-4-9">
</div><div id="outline-container-sec-4-9-1" class="outline-4">
<h4 id="sec-4-9-1">M-n M-p</h4>
<div class="outline-text-4" id="text-4-9-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd "M-p") 'backward-paragraph)
(global-set-key (kbd "M-n") 'forward-paragraph)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Utility Packages</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">Helm</h3>
<div class="outline-text-3" id="text-5-1">
<p>
<a href="https://github.com/emacs-helm/helm">Helm</a> is a visual incremental-completion helper.
</p>
</div>
<div id="outline-container-sec-5-1-1" class="outline-4">
<h4 id="sec-5-1-1">Setup</h4>
<div class="outline-text-4" id="text-5-1-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package helm
  :demand
  :bind (("M-x" . helm-M-x)
	 ("C-h f" . helm-apropos)
	 ("C-x C-f" . helm-find-files)
	 ("C-x b" . helm-buffers-list)
	 ("C-c y" . helm-show-kill-ring)
	 ("C-x C-r" . helm-recentf)
	 ("C-x r l" . helm-bookmarks))
  :config
  (helm-mode 1)
  (require 'helm-config))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-1-2" class="outline-4">
<h4 id="sec-5-1-2">ace-jump-helm-line</h4>
<div class="outline-text-4" id="text-5-1-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package ace-jump-helm-line
  :commands ace-jump-helm-line
  :config (define-key helm-map (kbd "C-;") 'ace-jump-helm-line))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-1-3" class="outline-4">
<h4 id="sec-5-1-3">helm-ag</h4>
<div class="outline-text-4" id="text-5-1-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package helm-ag)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-1-4" class="outline-4">
<h4 id="sec-5-1-4">helm-bookmark</h4>
<div class="outline-text-4" id="text-5-1-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'helm-bookmark)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-1-5" class="outline-4">
<h4 id="sec-5-1-5">helm-company</h4>
<div class="outline-text-4" id="text-5-1-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package helm-company
  :bind (("C-:" . helm-company)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-1-6" class="outline-4">
<h4 id="sec-5-1-6">helm-descbinds</h4>
<div class="outline-text-4" id="text-5-1-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package helm-descbinds
  :commands helm-descbinds
  :bind (("C-h b" . helm-descbinds)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-1-7" class="outline-4">
<h4 id="sec-5-1-7">helm-flyspell</h4>
<div class="outline-text-4" id="text-5-1-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package helm-flyspell
  :bind (:map flyspell-mode-map
	      ("C-;" . helm-flyspell-correct)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-1-8" class="outline-4">
<h4 id="sec-5-1-8">helm-org-rifle</h4>
<div class="outline-text-4" id="text-5-1-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package helm-org-rifle)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">Magit</h3>
<div class="outline-text-3" id="text-5-2">
</div><div id="outline-container-sec-5-2-1" class="outline-4">
<h4 id="sec-5-2-1">Setup</h4>
<div class="outline-text-4" id="text-5-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package magit
  :bind (("C-x g" . magit-status)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3">Projectile</h3>
<div class="outline-text-3" id="text-5-3">
</div><div id="outline-container-sec-5-3-1" class="outline-4">
<h4 id="sec-5-3-1">Setup</h4>
<div class="outline-text-4" id="text-5-3-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package projectile
  :init
  (setq projectile-enable-caching t)
  :config
  (projectile-mode t)
  (projectile-discover-projects-in-directory
   (file-name-as-directory (expand-file-name "~/src"))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-3-2" class="outline-4">
<h4 id="sec-5-3-2">helm-projectile</h4>
<div class="outline-text-4" id="text-5-3-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package helm-projectile)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Major Modes</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1">Applescript</h3>
<div class="outline-text-3" id="text-6-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package apples-mode
  :config
  (add-to-list 'auto-mode-alist '("\\.as\\'" . apples-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2">Lispy</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package lispy
  :config
  (add-hook 'emacs-lisp-mode-hook (lambda () (lispy-mode 1)))
  (add-hook 'lisp-interaction-mode-hook (lambda () (lispy-mode 1))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3">Paredit</h3>
<div class="outline-text-3" id="text-6-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package paredit
  :diminish paredit-mode
  :init
  (add-hook 'lisp-mode-hook 'enable-paredit-mode)
  (add-hook 'emacs-lisp-mode-hook 'enable-paredit-mode)
  (add-hook 'lisp-interaction-mode-hook 'enable-paredit-mode)
  (add-hook 'json-mode-hook 'enable-paredit-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4">Elfeed</h3>
<div class="outline-text-3" id="text-6-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun advice-unadvice (sym)
  "Remove all advices from symbol SYM."
  (interactive "aFunction symbol: ")
  (advice-mapc (lambda (advice _props) (advice-remove sym advice)) sym))

(defun elfeed-font-size-hook ()
  (buffer-face-set '(:height 1.75)))

(defun elfeed-visual-fill-hook ()
  (visual-fill-column-mode--enable))

(defun elfeed-show-refresh-advice (entry)
  (elfeed-font-size-hook)
  (visual-fill-column-mode 1)
  (setq word-wrap 1)
  (elfeed-show-refresh))

(defun elfeed-show ()
  (interactive)
  (elfeed)
  (delete-other-windows))

(use-package elfeed
  :bind (("C-x w" . elfeed-show))
  :config
  (add-hook 'elfeed-search-update-hook 'elfeed-font-size-hook)
  (advice-unadvice 'elfeed-show-entry)
  (advice-add 'elfeed-show-entry :after 'elfeed-show-refresh-advice)
  (use-package elfeed-org
    :config
    (elfeed-org)
    (setq rmh-elfeed-org-files (list "~/life/life.org"))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5">Docker</h3>
<div class="outline-text-3" id="text-6-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package dockerfile-mode
  :config
  (require 'dockerfile-mode)
  (add-to-list 'auto-mode-alist '("Dockerfile\\'" . dockerfile-mode)))

(use-package docker
  :config
  ;; Use "docker-machine env box" command to find out your environment variables
  (setenv "DOCKER_TLS_VERIFY" "0")
  (setenv "DOCKER_HOST" "unix:///private/var/run/docker.sock")
  (setenv "DOCKER_CERT_PATH" "/Users/dustnlacewell/.docker/machine/machines/box")
  (setenv "DOCKER_MACHINE_NAME" "box")
  (docker-global-mode 0))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-6" class="outline-3">
<h3 id="sec-6-6">Nix</h3>
<div class="outline-text-3" id="text-6-6">
</div><div id="outline-container-sec-6-6-1" class="outline-4">
<h4 id="sec-6-6-1">nix-mode</h4>
<div class="outline-text-4" id="text-6-6-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package nix-mode
  :init (add-to-list 'auto-mode-alist '("\\.nix?\\'" . nix-mode)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-6-2" class="outline-4">
<h4 id="sec-6-6-2">nix-sandbox</h4>
<div class="outline-text-4" id="text-6-6-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package nix-sandbox)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-6-7" class="outline-3">
<h3 id="sec-6-7">Python</h3>
<div class="outline-text-3" id="text-6-7">
</div><div id="outline-container-sec-6-7-1" class="outline-4">
<h4 id="sec-6-7-1">Jedi</h4>
<div class="outline-text-4" id="text-6-7-1">
<p>
<a href="https://github.com/tkf/emacs-jedi">Jedi</a> is an auto-completion server for Python.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package jedi
  :init
  (progn
    (add-hook 'python-mode-hook 'jedi:setup)
    (setq jedi:complete-on-dot t)))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-7-2" class="outline-4">
<h4 id="sec-6-7-2">Elpy</h4>
<div class="outline-text-4" id="text-6-7-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package elpy)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-6-8" class="outline-3">
<h3 id="sec-6-8">F#</h3>
<div class="outline-text-3" id="text-6-8">
</div><div id="outline-container-sec-6-8-1" class="outline-4">
<h4 id="sec-6-8-1">Setup</h4>
<div class="outline-text-4" id="text-6-8-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package fsharp-mode
  :init
  (progn
    (add-to-list 'exec-path "/usr/local/bin")
    (add-to-list 'exec-path "/Library/Frameworks/Mono.framework/Versions/Current/Commands")
    (add-to-list 'exec-path "/nix/var/nix/profiles/default/bin")
    (add-to-list 'exec-path "/Users/dustinlacewell/.nix-profile/bin")
    (add-to-list 'auto-mode-alist '("\\.fs[iylx]?$" . fsharp-mode))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-6-9" class="outline-3">
<h3 id="sec-6-9">Markdown</h3>
<div class="outline-text-3" id="text-6-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package markdown-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-6-10" class="outline-3">
<h3 id="sec-6-10">decide-mode</h3>
<div class="outline-text-3" id="text-6-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package decide)
(defun decide-insert (&amp;rest ARGS)
  (message (apply 'concat ARGS)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">Hydra</h2>
<div class="outline-text-2" id="text-7">
<p>
Hydra provides an easy way to create little pop-up interfaces with a collection of
related single-key bindings.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package hydra)
</pre>
</div>
</div>

<div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1">Hera</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Hera (<i>ˈhɛrə, ˈhɪərə</i>; Greek: Ἥρᾱ Hērā, equivalently Ἥρη Hērē, in Ionic and Homer) is
the goddess of women and marriage in Greek mythology and religion. She is the
daughter of the Titans Cronus and Rhea.
</p>

<p>
Slain by Hercules, Hera created the Hydra constellation.
</p>

<p>
This code allows the registration of major-mode specific hydras, and a default
one. Any hydra is of course free to show the default hydra if wanted.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">;; this is an alist of major mode -&gt; hydra body
(defvar hera-hydras nil)
;; the hydra body to run if no major mode specific hydra is set
(defvar hera-default-hydra nil)
;; return the hydra body for the current mode, or the default one
(defun hera--current-hydra ()
  (let ((current-hydra (assoc major-mode hera-hydras)))
    (if current-hydra (second current-hydra)
      hera-default-hydra)))
;; execute the hydra body for the current mode, or the default one
(defun hera-run ()
  (interactive)
  (let ((context (hera--current-hydra)))
    (when context (funcall context))))

;; bind hera-run
(global-set-key (kbd "&lt;f19&gt;") 'hera-run)
(global-set-key (kbd "C-&lt;f19&gt;") hera-default-hydra)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2">hydra-helm</h3>
<div class="outline-text-3" id="text-7-2">
<p>
This hydra is useful for navigating and invoking features inside Helm buffers.
</p>
</div>
<div id="outline-container-sec-7-2-1" class="outline-4">
<h4 id="sec-7-2-1">helm-persistent-delete-marked</h4>
<div class="outline-text-4" id="text-7-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun helm-persistent-delete-marked ()
  "Kill buffer without quitting helm."
  (interactive)
  (if (equal (cdr (assoc 'name (helm-get-current-source)))
	     "Buffers")
      (with-helm-alive-p
	(helm-attrset 'kill-action
		      '(helm-persistent-kill-buffers . never-split))
	(helm-execute-persistent-action 'kill-action))
    (user-error "Only works for buffers")))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-2-2" class="outline-4">
<h4 id="sec-7-2-2">helm-persistent-kill-buffers</h4>
<div class="outline-text-4" id="text-7-2-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun helm-persistent-kill-buffers (_buffer)
  (unwind-protect
      (dolist (b (helm-marked-candidates))
	(helm-buffers-persistent-kill-1 b))
    (with-helm-buffer
      (setq helm-marked-candidates nil
	    helm-visible-mark-overlays nil))
    (helm-force-update (helm-buffers--quote-truncated-buffer
			(helm-get-selection)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-2-3" class="outline-4">
<h4 id="sec-7-2-3">hydra-helm</h4>
<div class="outline-text-4" id="text-7-2-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defhydra hydra-helm (:hint nil :color pink)
  "
  ^^^^^^^^^^^^                                                                 ╭──────┐
   ^^Select   ^^Ends  ^^Sources  ^Other      ^^Mark             ^^Do^          │ Helm │
  ╭──^───^────^───^──────^─^──────^─^──────^─^────────────────^─^──────────────┴──────╯
      _k_      _V_       _K_       _p_   [_SPC_] mark         [_._] view
      ^↑^      ^↑^       ^↑^       ^↑^    [_t_]  toggle all   [_f_] follow: %(helm-attr 'follow)
      ^ ^      ^ ^       ^ ^       _c_    [_u_]  unmark all   [_y_] yank selection
      ^↓^      ^↓^       ^↓^       ^↓^    [_d_]  delete       [_w_] toggle windows
      _j_      _v_       _J_       _n_    ^ ^
  ^^^^^^^^^^                                                          _&lt;f19&gt;_ to close
  ^^^^^^^^^^^^────────────────────────────────────────────────────────────────────────
	  "
  ("&lt;f19&gt;" nil "quit")
  ("j" helm-next-line)
  ("k" helm-previous-line)
  ("V" helm-beginning-of-buffer)
  ("v" helm-end-of-buffer)
  ("J" helm-next-source)
  ("K" helm-previous-source)
  ("p" helm-scroll-other-window-down)
  ("n" helm-scroll-other-window)
  ("c" helm-recenter-top-bottom-other-window)
  ("SPC" helm-toggle-visible-mark)
  ("t" helm-toggle-all-marks)
  ("u" helm-unmark-all)
  ("." helm-execute-persistent-action)
  ("d" helm-persistent-delete-marked)
  ("y" helm-yank-selection)
  ("w" helm-toggle-resplit-and-swap-windows)
  ("f" helm-follow-mode)
  ("RET" helm-maybe-exit-minibuffer))

(add-to-list 'hera-hydras '(minibuffer-inactive-mode hydra-helm/body))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3">hydra-org</h3>
<div class="outline-text-3" id="text-7-3">
</div><div id="outline-container-sec-7-3-1" class="outline-4">
<h4 id="sec-7-3-1">hydra-org-goto-first-sibling</h4>
<div class="outline-text-4" id="text-7-3-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun hydra-org-goto-first-sibling () (interactive)
       (org-backward-heading-same-level 99999999))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-3-2" class="outline-4">
<h4 id="sec-7-3-2">hydra-org-goto-last-sibling</h4>
<div class="outline-text-4" id="text-7-3-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun hydra-org-goto-last-sibling () (interactive)
       (org-forward-heading-same-level 99999999))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-3-3" class="outline-4">
<h4 id="sec-7-3-3">hydra-org-parent-level</h4>
<div class="outline-text-4" id="text-7-3-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun hydra-org-parent-level ()
  (interactive)
  (let ((o-point (point)))
    (if (save-excursion
	  (beginning-of-line)
	  (looking-at org-heading-regexp))
	(progn
	  (call-interactively 'outline-up-heading)
	  (org-cycle-internal-local))
      (progn
	(call-interactively 'org-previous-visible-heading)
	(org-cycle-internal-local)))
    (when (and (/= o-point (point))
	       org-tidy-p)
      (call-interactively 'hydra-org-tidy))))

(defun hydra-org-child-level ()
  (interactive)
  (org-show-entry)
  (org-show-children)
  (when (not (org-goto-first-child))
    (when (save-excursion
	    (beginning-of-line)
	    (looking-at org-heading-regexp))
      (next-line))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-3-4" class="outline-4">
<h4 id="sec-7-3-4">hydra-org</h4>
<div class="outline-text-4" id="text-7-3-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defhydra hydra-org (:hint nil :color red)
  "
^^^^^^^^^^^^^^^^^^                                                                ^     ^  ╭─────┐
 ^ ^^Shift  ^^^^Header  ^^Level  ^^Ends  ^^Narrow       ^^Jump                        ^^^^^│ Org │
╭^─^──^─^──^─^───^─^───────^─^─────^─^──────^─^───────────────────────────────────^───^^^^^┴─────╯
 ^ ^  _K_  ^ ^   _p_       _k_     _a_      _o_      [_r_] Rifle         [_SPC_] Cycle
 ^ ^  ^↑^  ^ ^   ^↑^       ^↑^     ^↑^      ^↑^      [_v_] Avy           [_t_]  Tidy mode: %(org-tidy-p)
 _h_ ←^ ^→ _l_   ^ ^       ^ ^     ^ ^      ^ ^      [_s_] Siblings      [_L_]  Links
 ^ ^  ^↓^  ^ ^   ^↓^       ^↓^     ^↓^      ^↓^      [_d_] Children
 ^ ^  _J_  ^ ^   _n_       _j_     _e_      _i_      [_f_] Parents
^^^^^^^^^^^^^^                                          Level
^^^^^^^^^                                       [_1_ _2_ _3_ _4_ _5_]             _&lt;f19&gt;_ to close
^^^^^^^^^^^^^^^^^^^^──────────────────────────────────────────────────────────────────────────────"
  ("&lt;f19&gt;" (funcall hera-default-hydra) nil :color blue)
  ;; shift
  ("h" org-promote-subtree)
  ("l" org-demote-subtree)
  ("K" org-move-subtree-up)
  ("J" org-move-subtree-down)
  ;; header
  ("p" org-backward-heading-same-level)
  ("n" org-forward-heading-same-level)
  ;; ends
  ("a" hydra-org-goto-first-sibling)
  ("e" hydra-org-goto-last-sibling)
  ;; level
  ("j" hydra-org-child-level)
  ("k" hydra-org-parent-level)
  ;; narrow
  ("o" nn-widen)
  ("i" nn-narrow)

  ("SPC" org-cycle)
  ("t" org-tidy)
  ("L" org-toggle-link-display)

  ("r" (lambda () (interactive)
	 (helm-org-rifle-current-buffer)
	 (call-interactively 'org-cycle)
	 (call-interactively 'org-cycle)))
  ("v" avy-org-goto-heading-timer)
  ("s" avy-org-same-level)
  ("d" avy-org-child-level)
  ("f" avy-org-parent-level)
  ("S" (lambda () (interactive) (helm-org-in-buffer-headings) (org-cycle) (org-cycle)))

  ("1" (avy-org-goto-level 1))
  ("2" (avy-org-goto-level 2))
  ("3" (avy-org-goto-level 3))
  ("4" (avy-org-goto-level 4))
  ("5" (avy-org-goto-level 5)))

(add-to-list 'hera-hydras '(org-mode hydra-org/body "org-mode"))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4">hydra-python</h3>
<div class="outline-text-3" id="text-7-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defhydra hydra-python (:hint nil :color blue)
  "
^^                 ╭────────┐
^^ Jump            │ Python │
───────────────────┴────────╯
[_d_] def
[_c_] class
 ^ ^         _&lt;f19&gt;_ to close
─^─^─────────────────────────"


  ("&lt;f19&gt;" (funcall hera-default-hydra) nil :color blue)
  ("d" (helm-occur "")))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-5" class="outline-3">
<h3 id="sec-7-5">hydra-eval</h3>
<div class="outline-text-3" id="text-7-5">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defhydra hydra-eval (:color blue :hint nil)
  "
							 ╭──────┐
      Elisp                Debug                         │ Eval │
╭────────────────────────────────────────────────────────┴──────╯
 [_d_] defun          [_D_] defun
 [_s_] last sexp      [_t_] tag defun
 [_b_] buffer         [_c_] call at point
 [_r_] region         [_a_] tag all defs: %`edebug-all-defs
 [_x_] expression     [_A_] tag all forms: %`edebug-all-forms
						 _&lt;f19&gt;_ to close
└────────────────────────────────────────────────────────────────
  "
  ("d" eval-defun)
  ("s" eval-last-sexp)
  ("b" eval-current-buffer)
  ("r" eval-region)
  ("x" eval-expresison)

  ("D" edebug-defun)
  ("t" (lambda () (interactive) (eval-defun (4))))
  ("c" edebug-instrument-callee)
  ("a" edebug-all-defs)
  ("A" edebug-all-forms)

  ("&lt;f19&gt;" nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-6" class="outline-3">
<h3 id="sec-7-6">hydra-window</h3>
<div class="outline-text-3" id="text-7-6">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package ace-window)

(defhydra hydra-window (:hint nil)
   "
						     ╭─────────┐
      Move           Split           Do              │ Windows │
╭────────────────────────────────────────────────────┴─────────╯
	^_k_^      [_v_] vertical      [_s_] swap
	^^↑^^      [_x_] horizontal    [_b_] buffer
    _h_ ←   → _l_  [_o_] kill others   [_f_] file
	^^↓^^      [_d_] delete
	^_j_^                                        _&lt;f19&gt;_ to close
────────────────────────────────────────────────────────────────
"
   ("h" windmove-left )
   ("j" windmove-down )
   ("k" windmove-up )
   ("l" windmove-right )
   ("q" hydra-move-splitter-left)
   ("w" hydra-move-splitter-down)
   ("e" hydra-move-splitter-up)
   ("r" hydra-move-splitter-right)
   ("b" helm-mini)
   ("f" helm-find-files)
   ("F" follow-mode)
   ("a" (lambda ()
	  (interactive)
	  (ace-window 1)
	  (add-hook 'ace-window-end-once-hook
		    'hydra-window/body))
       )
   ("v" (lambda ()
	  (interactive)
	  (split-window-right)
	  (windmove-right))
       )
   ("x" (lambda ()
	  (interactive)
	  (split-window-below)
	  (windmove-down))
       )
   ("s" (lambda ()
	  (interactive)
	  (ace-window 4)
	  (add-hook 'ace-window-end-once-hook
		    'hydra-window/body)))
   ("S" save-buffer)
   ("d" delete-window)
   ("D" (lambda ()
	  (interactive)
	  (ace-window 16)
	  (add-hook 'ace-window-end-once-hook
		    'hydra-window/body))
       )
   ("o" delete-other-windows (:color blue))
   ("i" ace-maximize-window)
   ("z" (progn
	  (winner-undo)
	  (setq this-command 'winner-undo))
   )
   ("Z" winner-redo)
   ("&lt;f19&gt;" nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-7" class="outline-3">
<h3 id="sec-7-7">hydra-yank-pop</h3>
<div class="outline-text-3" id="text-7-7">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defhydra hydra-yank-pop (:columns 1 :hint nil)
"
prev^^   next
[_Y_] ←→ [_y_]

On Deck:
--------
%(substring-no-properties (current-kill 1 t))
"
  ("C-y" yank nil)
  ("M-y" yank-pop nil)
  ("y" (yank-pop 1))
  ("Y" (yank-pop -1))
  ("l" helm-show-kill-ring "list" :color blue))   ; or browse-kill-ring
(global-set-key (kbd "M-y") #'hydra-yank-pop/yank-pop)
(global-set-key (kbd "C-y") #'hydra-yank-pop/yank)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-8" class="outline-3">
<h3 id="sec-7-8">hydra-zoom</h3>
<div class="outline-text-3" id="text-7-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">  (defhydra hydra-zoom (:color red)
    "
zoom -- _&lt;f19&gt;_ to close
"
    ("&lt;f19&gt;" nil, nil)
    ("i" text-scale-increase "in")
    ("o" text-scale-decrease "out"))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-9" class="outline-3">
<h3 id="sec-7-9">hydra-mark</h3>
<div class="outline-text-3" id="text-7-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun unpop-to-mark-command ()
  "Unpop off mark ring. Does nothing if mark ring is empty."
  (interactive)
      (when mark-ring
	(setq mark-ring (cons (copy-marker (mark-marker)) mark-ring))
	(set-marker (mark-marker) (car (last mark-ring)) (current-buffer))
	(when (null (mark t)) (ding))
	(setq mark-ring (nbutlast mark-ring))
	(goto-char (marker-position (car (last mark-ring))))))

(defhydra hydra-mark (:color pink :hint nil)
  "
		     ╭──────┐
		     │ Mark │
  ╭──────────────────┴──────╯
   [_m_] push mark
   [_p_] previous
   [_n_] next
	    _&lt;f19&gt;_ to close
  └─────────────────────────
    "
  ("m" (lambda () (interactive) (set-mark-command nil)(set-mark-command nil)))
  ("p" (set-mark-command '(4)))
  ("n" (unpop-to-mark-command))

  ("&lt;f19&gt;" nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-10" class="outline-3">
<h3 id="sec-7-10">hydra-registers</h3>
<div class="outline-text-3" id="text-7-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq register-preview-delay nil)
(defhydra hydra-registers (:color pink :hint nil)
  "
  ^ ^                 ^ ^                  ^ ^                    ╭───────────┐
    ^^Point             ^^Text               ^^Macro              │ Registers │
╭─^─^─────────────────^─^──────────────────^─^────────────────────┴───────────╯
 [_r_] save point    [_c_] copy region    [_m_] store
 [_j_] jump          [_C_] copy rect      [_e_] execute
 [_v_] view all      [_i_] insert
  ^ ^                [_p_] prepend
  ^ ^                [_a_] append
  ^ ^                 ^ ^                  ^ ^                _&lt;f19&gt;_ to close
└─^─^─────────────────^─^──────────────────^─^────────────────────────────────
  "
  ("r" point-to-register)
  ("j" jump-to-register)
  ("v" view-register)

  ("c" copy-to-register)
  ("C" copy-rectangle-to-register)
  ("i" insert-register)
  ("a" append-to-register)
  ("p" prepend-to-register)

  ("m" kmacro-to-register)
  ("e" jump-to-register)

  ("&lt;f19&gt;" nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-11" class="outline-3">
<h3 id="sec-7-11">hydra-bookmarks</h3>
<div class="outline-text-3" id="text-7-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun hydra--view-bookmarks ()
  (interactive)
  (hydra-bookmarks/body)
  (helm-bookmarks))

(defun hydra--set-bookmark (&amp;optional name)
  (interactive)
  (let ((filename (or name (format "%s:%s" (buffer-name) (line-number-at-pos)))))
    (bookmark-set filename)))

(defhydra hydra-bookmarks (:color blue)
  "bookmarks"
  ("SPC" nil "quit")
  ("a" hydra--set-bookmark "here")
  ("n" (lambda () (interactive)) (hydra--set-bookmark (read-from-minibuffer "Name")) "named")
  ("l" helm-bookmarks "list"))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-12" class="outline-3">
<h3 id="sec-7-12">hydra-help</h3>
<div class="outline-text-3" id="text-7-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defhydra hydra-help (:exit t)
"
^^^^^^^^                                                                                  ╭────────┐
 Describe         ^ ^ Keys                  ^ ^Search                 ^ ^Docs           ^^│  Help  │
^─^───────────────^─^───────────────────────^─^─────────────────────────^─^───────────────┴────────╯
_f_unction        _k_eybinding              _a_propros                  _i_nfo
_p_ackage         _w_here-is                _d_oc strings               _n_: man
_m_ode            _b_: show all bindings    _s_: info by symbol         _h_elm-dash
_v_ariable
^^^^^^^^                                                                                 SPC to exit
^^^^^^^^────────────────────────────────────────────────────────────────────────────────────────────
"
    ;; Boring help commands...
    ("e" view-echo-area-messages "messages")
    ("l" view-lossage "lossage")
    ("C" describe-coding-system "coding-system")
    ("I" describe-input-method "input-method")


    ;; Documentation
    ("i" info nil)
    ("n" helm-man-woman nil)
    ("h" helm-dash)

    ;; Keybinds
    ("b" describe-bindings nil)
    ("c" describe-key-briefly nil)
    ("k" describe-key nil)
    ("w" where-is nil)

    ;; Search
    ("a" helm-apropos nil)
    ("d" apropos-documentation nil)
    ("s" info-lookup-symbol nil)

    ;; Describe
    ("f" describe-function nil)
    ("p" describe-package nil)
    ("m" describe-mode nil)
    ("v" describe-variable nil)
    ("y" describe-syntax nil)

    ;; quit
    ("SPC" help-quit nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-13" class="outline-3">
<h3 id="sec-7-13">hydra-toggle</h3>
</div>
<div id="outline-container-sec-7-14" class="outline-3">
<h3 id="sec-7-14">hydra-projectile</h3>
<div class="outline-text-3" id="text-7-14">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun projectile-dwim ()
  (interactive)
  (if (string= "-" (projectile-project-name))
      (helm-projectile-switch-project)
    (hydra-projectile/body)))

(defhydra hydra-projectile (:color blue :hint nil)
"
 ^ ^               ^ ^             ^ ^              ^ ^               ╭─────────┐
 ^ ^ Open          ^ ^ Search      ^ ^ Buffers      ^ ^ Cache         │ Project │
─^─^───────────────^─^─────────────^─^──────────────^─^───────────────┴─────────╯
[_f_] file        [_a_] ack       [_s_] switch     [_C_] clear
[_r_] recent      [_o_] occur     [_k_] kill       [_x_] remove
[_p_] project      ^ ^             ^ ^             [_X_] cleanup
[_d_] directory
^^^^^^^^                                                              SPC to exit
^^^^^^^^─────────────────────────────────────────────────────────────────────────
@ %(projectile-project-root)
"
  ("SPC" nil)
  ("a"   projectile-ag)
  ("s"   helm-projectile-switch-to-buffer)
  ("C"   projectile-invalidate-cache)
  ("d"   helm-projectile-find-dir)
  ("f"   helm-projectile-find-file)
  ("k"   projectile-kill-buffers)
  ("o"   projectile-multi-occur)
  ("p"   helm-projectile-switch-project "switch project")
  ("r"   helm-projectile-recentf)
  ("x"   projectile-remove-known-project)
  ("X"   projectile-cleanup-known-projects)
  ("q"   nil "cancel" :color blue))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">Life Support</h2>
<div class="outline-text-2" id="text-8">
<p>
With the use of <a href="https://github.com/dustinlacewell/org-ls">org-ls</a> I load an org-file which contains a number of babel
source-blocks and utility elisp. These support functions are utilized in my use of
org-mode and to build hydras.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(use-package org-ls
  :after (org hydra)
  :straight (org-ls :type git :host github :repo "dustinlacewell/org-ls")
  :config
  (require 'org-ls)
  (org-ls-load-file (expand-file-name "~/life/life-support.org")))
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Dustin Lacewell</p>
<p class="date">Created: 2018-04-19 Thu 16:54</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
